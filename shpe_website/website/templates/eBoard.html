{% extends 'base.html' %}
{% load static %}

{% block title %}SHPE UVA Leadership | Executive Board{% endblock %}

{% block content %}
<section class="content-section" style="background: linear-gradient(135deg, #0e3559 0%, #1a4b73 100%); color: white; padding: 4rem 0;">
    <div class="container text-center">
        <h1 class="hero-title" style="color: white; margin-bottom: 1rem;">Our Leadership Team</h1>
        <p class="hero-subtitle" style="color: rgba(255, 255, 255, 0.9); max-width: 600px; margin: 0 auto;">
            Meet the dedicated students leading SHPE UVA in 2025, working to empower Hispanic engineers and create opportunities for our community.
        </p>
    </div>
</section>

<section class="content-section">
    <div class="container">
        {% if total_exec > 0 %}
        <div class="section-header">
            <h2 class="section-title">2025 Executive Board</h2>
            <p class="section-subtitle">{{ total_exec }} passionate leaders driving change and fostering community</p>
        </div>

        <div class="alumni-grid">
            {% for exec in current_exec %}
            <div class="alumni-card">
                <div class="alumni-year-badge">
                    {% if exec.shpe_status == 'member' %}Member
                    {% elif exec.shpe_status == 'officer' %}Officer
                    {% elif exec.shpe_status == 'secretary' %}Secretary
                    {% elif exec.shpe_status == 'treasurer' %}Treasurer
                    {% elif exec.shpe_status == 'vice_president' %}VP
                    {% elif exec.shpe_status == 'co_president' %}Co-President
                    {% elif exec.shpe_status == 'president' %}President
                    {% elif exec.shpe_status == 'social_chair' %}Social Chair
                    {% elif exec.shpe_status == 'marketing' %}Marketing
                    {% elif exec.shpe_status == 'corporate_relations' %}Corp Relations
                    {% elif exec.shpe_status == 'community_outreach' %}Outreach
                    {% elif exec.shpe_status == 'convention_chair' %}Convention
                    {% elif exec.shpe_status == 'first_year_rep' %}First Year Rep
                    {% elif exec.shpe_status == 'spiderman' %}WebMaster
                    {% else %}Member{% endif %}
                </div>
                
                <div class="alumni-photo-container">
                    {% if exec.headshot %}
                    <img src="{% static 'images/default-avatar.svg' %}" 
                         data-src="{{ exec.headshot.url }}" 
                         alt="{{ exec.name }}" 
                         class="alumni-photo lazy-image"
                         loading="lazy">
                    {% else %}
                    <img src="{% static 'images/default-avatar.svg' %}" 
                         alt="{{ exec.name }}" 
                         class="alumni-photo" 
                         style="opacity: 0.8;">
                    {% endif %}
                    <div class="loading-spinner"></div>
                </div>
                
                <h3 class="alumni-name">{{ exec.name }}</h3>
                <div class="alumni-major">{{ exec.major }} â€¢ Class of {{ exec.graduation_year }}</div>
                
                {% if exec.position %}
                <div class="alumni-title">{{ exec.position }}</div>
                {% endif %}
                
                {% if exec.company %}
                <div class="alumni-company">{{ exec.company }}</div>
                {% endif %}
                
                {% if exec.bio %}
                <div class="alumni-bio">{{ exec.bio }}</div>
                {% endif %}
                
                <div class="alumni-social">
                    {% if exec.linkedin_url %}
                    <a href="{{ exec.linkedin_url }}" target="_blank" aria-label="LinkedIn">
                        <i class="bi bi-linkedin"></i>
                    </a>
                    {% endif %}
                    <a href="mailto:{{ exec.email }}" aria-label="Email">
                        <i class="bi bi-envelope-fill"></i>
                    </a>
                </div>
                
                <a href="mailto:{{ exec.email }}" class="alumni-contact-btn">Contact {{ exec.name|truncatewords:1|cut:" " }}</a>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center" style="padding: 4rem 0;">
            <h3 class="section-title">Executive Board Information Coming Soon</h3>
            <p class="section-subtitle">We're updating our leadership information. Check back soon!</p>
            <div style="margin-top: 2rem;">
                <a href="{% url 'website:index' %}" class="learn-more-btn">Return Home</a>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<section class="content-section alt-bg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="section-title">Interested in Leadership?</h2>
                <p class="section-subtitle">SHPE UVA leadership positions are available to active members who want to make a difference in our community</p>
                <div class="learn-more-btn-container">
                    <a href="https://shpe.org/engage/events/national-convention/" target="_blank" class="btn-primary-modern">Join SHPE UVA</a>
                    <a href="{% url 'website:index' %}" class="btn-secondary-modern">Learn More About SHPE</a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Lazy loading functionality
document.addEventListener('DOMContentLoaded', function() {
    const lazyImages = document.querySelectorAll('.lazy-image');
    
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    const container = img.closest('.alumni-photo-container');
                    const spinner = container.querySelector('.loading-spinner');
                    
                    // Show loading spinner
                    if (spinner) {
                        spinner.style.display = 'block';
                    }
                    
                    // Load the actual image
                    img.src = img.dataset.src;
                    img.classList.remove('lazy-image');
                    
                    // Hide spinner and show image when loaded
                    img.onload = function() {
                        if (spinner) {
                            spinner.style.display = 'none';
                        }
                        img.style.opacity = '1';
                    };
                    
                    // Handle load errors
                    img.onerror = function() {
                        if (spinner) {
                            spinner.style.display = 'none';
                        }
                        img.src = "{% static 'images/default-avatar.svg' %}";
                        img.style.opacity = '0.8';
                    };
                    
                    imageObserver.unobserve(img);
                }
            });
        }, {
            rootMargin: '50px 0px', // Start loading 50px before the image comes into view
            threshold: 0.01
        });
        
        lazyImages.forEach(img => imageObserver.observe(img));
    } else {
        // Fallback for browsers without IntersectionObserver
        lazyImages.forEach(img => {
            img.src = img.dataset.src;
            img.classList.remove('lazy-image');
        });
    }
});
</script>
{% endblock %}